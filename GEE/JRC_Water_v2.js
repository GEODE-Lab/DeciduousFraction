/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var arctic = /* color: #d63000 */ee.Geometry.Polygon(
        [[[-179.77131246200844, 54.516441969470605],
          [-177.18280810170018, 56.9468286994722],
          [-176.44047876834895, 59.49813254264309],
          [-172.89140799883933, 63.58193789713882],
          [-169.59556865313368, 64.62200277997884],
          [-168.43302655437475, 65.86642081094386],
          [-167.22827636980276, 66.75999650592715],
          [-167.49915962716454, 68.1760764700572],
          [-164.77873697381983, 69.81801032893613],
          [-156.11752174971667, 72.2278663695662],
          [-131.79310603220028, 71.52476253688286],
          [-126.86309071075232, 75.28664295616439],
          [-125.36905495030868, 77.1074186479855],
          [-90.1683290881407, 78.87230739168986],
          [-69.85146291665984, 79.10558984345255],
          [-46.1494272898326, 78.43851911981646],
          [-29.4633679526911, 77.74195882624508],
          [-16.818687500100737, 78.30437297533338],
          [-11.984270706591587, 76.70744635254201],
          [-8.549992204709724, 75.55508663857965],
          [-4.734986254268051, 71.0300193946269],
          [17.31317993444611, 71.3494820155649],
          [29.170766267466888, 72.3513462610141],
          [42.49492264900516, 72.66220928924616],
          [76.11792681916518, 78.54422255396422],
          [95.72657759696858, 78.23517404479628],
          [106.75213722057572, 78.83381514594548],
          [115.53594911090886, 77.70066403709914],
          [143.6151231885857, 77.8369774272788],
          [157.01568864337423, 75.54923939710338],
          [155.3005773716036, 72.02664366207024],
          [-179.55456251618125, 73.50787304490326],
          [-175.88085937865964, 71.19024390096358],
          [-178.20214085887653, 69.62492319101132],
          [-169.51324647445568, 65.98231232877019],
          [-171.88375217980547, 64.65799768375851],
          [-176.67389330910748, 63.345586654766166],
          [175.9489479538537, 60.09197971157342],
          [167.1636439386848, 57.4409249299576],
          [166.83058339106765, 50.421558459809596],
          [152.13783372804744, 47.35459163745844],
          [137.13033011110508, 46.79249202285614],
          [119.51874393569562, 47.124899810110236],
          [105.1475821910758, 50.81340761312016],
          [110.21823990663438, 60.641527344113335],
          [133.92905334626278, 60.83296924423349],
          [124.60326491995397, 64.52781179502463],
          [118.96199481775989, 68.69461797095926],
          [105.9782104106315, 67.77379670867067],
          [107.38968705077696, 66.12622555158109],
          [95.46145637082122, 64.35541697643924],
          [84.58020067823043, 65.0994008578261],
          [74.40482854441007, 64.94808663641226],
          [61.59880384117923, 63.49727381204879],
          [48.265983371285756, 64.64892479419278],
          [26.510939341225594, 65.25131346916635],
          [12.093517127162727, 57.00852081339021],
          [4.369194162307508, 58.14418965206654],
          [-2.980131189054987, 65.34557385302591],
          [-14.861139980427424, 62.0090114812198],
          [-39.913250865839586, 58.46146335694738],
          [-60.675956396158085, 55.1108249881919],
          [-71.93706175546043, 54.2035510006923],
          [-84.24999525877058, 56.51109880421706],
          [-91.1149813343473, 55.72971603247236],
          [-104.83967746012206, 60.383353270714565],
          [-124.20999499169841, 66.21784114604253],
          [-120.51024852906198, 61.91414911189081],
          [-130.89787938315476, 59.59151244593436],
          [-126.14222664023924, 54.32369088166587],
          [-132.654753148782, 54.52741972522088],
          [-143.92410724057135, 58.50124685463759],
          [-152.01821297103857, 56.89899282993586],
          [-167.8452930889622, 51.767846598768855],
          [179.1411375316501, 50.20776723114208],
          [179.44068871344496, 52.560741120143845]]]),
    usa_extent = ee.Image("users/masseyr44/decid/usa_extent"),
    canada_extent = ee.Image("users/masseyr44/decid/canada_extent"),
    water_extent = ee.Image("JRC/GSW1_0/GlobalSurfaceWater"),
    bounds = /* color: #d63000 */ee.Geometry.Polygon(
        [[[-169.92100163385817, 73.58893237333893],
          [-123.16318913385817, 78.03347396233539],
          [-62.69443913385817, 77.588148944776],
          [-32.10850163385817, 55.50043402215353],
          [-37.73350163385817, 36.76940290113422],
          [-63.39756413385817, 10.352392279380277],
          [-91.87412663385817, -4.352248894422934],
          [-154.10068913385817, 20.50387109794654],
          [-168.25782656711544, 42.57204165592844],
          [171.43139708094782, 52.84629845892436],
          [-172.33799382135817, 63.81870469941852],
          [-168.32240896822066, 64.04612408436651],
          [-168.12329194734627, 66.29861810438305],
          [-168.65063569734627, 70.84174381854098]]]),
    extent_l = ee.Image("users/masseyr44/decid/land_extent_NA");
/***** End of imports. If edited, may not auto-convert in the playground. *****/
var land_extent = ee.ImageCollection([usa_extent, canada_extent]).mosaic().unmask(0).subtract(1).abs().rename('extent')

//Map.addLayer(land_extent,{min:0, max:1},'land_extent')

water_extent = water_extent.select(['max_extent']).unmask(0).rename('extent')
//print(land_extent)
//print(water_extent)
//Map.addLayer(water_extent,{min:0, max:1},'water_extent0')
var water_extent = land_extent.add(water_extent)

water_extent = water_extent.updateMask(water_extent.gt(0)).multiply(0).unmask(1)

land_extent = water_extent.multiply(ee.ImageCollection([usa_extent, canada_extent]).mosaic())
land_extent = land_extent.updateMask(land_extent.eq(1)).byte()
//Map.addLayer(water_extent,{min:0, max:1},'water_extent')
Map.addLayer(extent_l,{min:0, max:1, palette:'FF5733'},'land_extent')


Export.image.toDrive({
  image: land_extent,
  folder:'land_extent',
  scale: 30,
  crs:'EPSG:4326',
  maxPixels: 1e13,
  fileNamePrefix: 'land_extent_NA',
  description:  'land_extent_NA',
  region: bounds
})

Export.image.toAsset({
  image: land_extent,
  scale: 30,
  maxPixels: 1e13,
  assetId: 'land_extent_NA',
  description:  'land_extent_NA',
  region: bounds
})