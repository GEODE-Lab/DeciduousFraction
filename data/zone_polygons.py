from geosoup import Vector, Sublist


def bounds2coords(bounds_list,
                  close_rings=False):
    """
    Method to return point coords of vertices from bounds
    :param bounds_list: (minx, maxx, miny, maxy)
    :param close_rings: bool, should last vertex be the same as the first one
    :return: list of list oof x, y coords
    """
    minx, maxx, miny, maxy = bounds_list
    vertex_coords = [[minx, maxy],
                     [maxx, maxy],
                     [maxx, miny],
                     [minx, miny]]
    if close_rings:

        return vertex_coords + [vertex_coords[0]]
    else:
        return vertex_coords


if __name__ == '__main__':

    # minx maxx miny maxy
    bounds = (-179.5, -50, 40, 80)

    ndiv = 5

    outfile = 'D:/Shared/Dropbox/projects/NAU/landsat_deciduous/data/STUDY_AREA/zone_bounds{}.shp'.format(str(ndiv))

    zone_x_edges = Sublist.frange(-179.5, -50, div=ndiv)
    print(zone_x_edges)

    zone_bounds = list((zone_x_edges[i], zone_x_edges[i + 1], 40, 80) for i in range(ndiv))

    vec = Vector(name='new_vec', epsg=4326, geom_type='polygon', in_memory=True, verbose=True)

    for zone_bound in zone_bounds:
        coords = bounds2coords(zone_bound, close_rings=True)
        print(coords)
        vec.add_feat(Vector.get_osgeo_geom(Vector.wkt_from_coords(coords, 'polygon')))

    print(vec)
    vec.write_vector(outfile)

    '''
    
    # geometries begin -------------------------------------------------------------------------
    # NWT, Yukon
    zone1 = ee.Geometry.Polygon(
        [[[-141.328125, 61.73152565113397],
          [-136.98804910875856, 61.55754198059565],
          [-130.25390625, 61.64816245852395],
          [-118.388671875, 61.64816245852392],
          [-109.775390625, 61.68987220045999],
          [-109.248046875, 79.88973717174639],
          [-124.8386769987568, 75.69839539226707],
          [-127.29971233251035, 73.05352679871419],
          [-127.76447139555012, 71.18241823975474],
          [-136.57574846816965, 69.76160143677127],
          [-141.416015625, 70.19999407534661]]])

    # Nunawut
    zone2 = ee.Geometry.Polygon(
        [[[-109.599609375, 79.87429692631285],
          [-110.390625, 61.56457388515459],
          [-102.12890625, 61.56457388515459],
          [-92.63671875, 61.56457388515459],
          [-80.33203125, 61.5226949459836],
          [-58.88671875, 61.18562468142283],
          [-60.75359838478971, 66.69128444147464],
          [-68.115234375, 72.5544984966527],
          [-79.46268521182355, 75.82654435670185],
          [-90.3515625, 76.59854506890709],
          [-95.44188013163352, 78.96511286239308],
          [-100.76670066607682, 79.22444104665169]]])

    # BC, Alberta
    zone3 = ee.Geometry.Polygon(
        [[[-138.076171875, 58.031372421776396],
          [-134.208984375, 53.17311920264064],
          [-124.892578125, 47.694974341862824],
          [-118.388671875, 48.574789910928885],
          [-109.775390625, 48.516604348867475],
          [-109.86328125, 50.56928286558243],
          [-109.86328125, 62.103882522897855],
          [-112.5, 61.98026726504401],
          [-119.1796875, 61.93895042666061],
          [-125.33203125, 61.93895042666061],
          [-130.693359375, 61.85614879566797],
          [-136.494140625, 61.85614879566797],
          [-140.44921875, 61.77312286453145],
          [-141.416015625, 61.83541335794044],
          [-141.44003213100132, 59.30091542995645]]])

    # saskatchewan - newfoundland
    zone4 = ee.Geometry.Polygon(
        [[[-102.0821983401313, 48.343732182918444],
          [-96.28723300378971, 48.39859262718133],
          [-92.33619096396069, 47.69095915583918],
          [-87.81162057295387, 46.796920302596604],
          [-83.42980022947569, 41.17566199379897],
          [-75.21556264793293, 43.47894951694195],
          [-74.1337105671289, 44.314986738924844],
          [-71.14921369191927, 44.75275797950917],
          [-69.01569850009935, 46.123823821620945],
          [-65.54991505307743, 43.04775213049375],
          [-59.10953400025778, 45.63721256282798],
          [-52.28045548936922, 46.41967042543777],
          [-53.408531066369335, 52.30015394449034],
          [-57.663708890390865, 54.94669881803222],
          [-61.97826979439657, 60.00768963705834],
          [-62.701459572887245, 61.781130426408225],
          [-74.52581787486929, 61.918873824879256],
          [-77.50806588283604, 61.91829272622474],
          [-81.63042692545287, 61.710622267579524],
          [-88.99818618459153, 61.91763439088837],
          [-93.99771914137938, 61.918135426805065],
          [-98.99746257904286, 61.83642058422084],
          [-103.64659209642855, 61.75483188993627],
          [-110.57640085568312, 61.92313920977558],
          [-110.77515484366108, 48.58088542654131]]])

    # alaska
    zone5 = ee.Geometry.Polygon(
        [[[-167.783203125, 68.07330474079025],
          [-164.970703125, 66.96447630005638],
          [-168.486328125, 66.26685631430843],
          [-168.22265625, 64.54844014422517],
          [-163.740234375, 63.89873081524393],
          [-166.728515625, 63.11463763252092],
          [-168.3984375, 59.355596110016315],
          [-159.78515625, 57.326521225217064],
          [-165.498046875, 55.727110085045986],
          [-164.70703125, 53.225768435790194],
          [-158.818359375, 54.87660665410869],
          [-153.193359375, 55.7765730186677],
          [-152.490234375, 57.27904276497778],
          [-149.4140625, 58.99531118795094],
          [-145.810546875, 59.977005492196],
          [-140.7568359375, 59.153403092050375],
          [-140.90746584324359, 65.67611691802753],
          [-140.888671875, 70.1851027549897],
          [-146.162109375, 70.55417853776078],
          [-154.248046875, 71.49703690095419],
          [-160.3125, 71.24435551310674],
          [-167.255859375, 68.97416358340674]]])

    boreal = ee.Geometry.Polygon(
        [[[-170.170703125, 50.55860413479424],
          [-158.217578125, 52.68617167041279],
          [-153.30939285434152, 55.911669002771404],
          [-150.04375, 58.80503543579855],
          [-139.233203125, 58.068985987821954],
          [-136.15703125, 54.714910470066776],
          [-132.28984375, 47.267822642617666],
          [-131.4109375, 41.59465704101877],
          [-123.9066476728093, 41.3211582877145],
          [-116.25939622443843, 41.46034634091618],
          [-108.55937499999999, 41.36419260424219],
          [-102.89042968749999, 41.397166266344954],
          [-96.21074218749999, 41.26517132419739],
          [-90.49785156249999, 41.23213080790694],
          [-84.25761718749999, 41.23213080790694],
          [-77.05058593749999, 41.29819513068916],
          [-68.12968749999999, 41.26517132419742],
          [-56.70390624999999, 43.7589530883319],
          [-50.72734374999999, 47.38696854291394],
          [-52.92460937499999, 52.79259685897027],
          [-57.84648437499999, 56.64698491697063],
          [-64.87773437499999, 61.5146781712937],
          [-73.96213049438268, 62.80048928805028],
          [-78.32093919613442, 62.78853877630148],
          [-80.52226562499999, 59.74792657078106],
          [-84.9374198886535, 59.27782159718193],
          [-88.37276592344836, 60.37639431989281],
          [-94.32109374999999, 64.65432185309979],
          [-110.84453124999999, 69.12528180058297],
          [-127.45585937499999, 70.69439418030035],
          [-145.209765625, 71.54742032805514],
          [-151.99237509694262, 71.7394004113125],
          [-158.920703125, 71.46378059608598],
          [-163.9438033714605, 70.33273202428589],
          [-167.358203125, 68.74622173946399],
          [-168.588671875, 67.76966607015038],
          [-168.764453125, 66.43638686378715],
          [-168.54359182813454, 65.57009532838762],
          [-169.643359375, 64.74821921769586],
          [-172.1921875, 63.91066619210742],
          [-177.66337890625, 60.31862431477453],
          [178.16636398271964, 57.45355647434897],
          [171.06398672131763, 52.978982153380194],
          [174.72537102620095, 51.303685681238484],
          [-178.3430865436669, 50.38214994852445]]])
    
    '''


